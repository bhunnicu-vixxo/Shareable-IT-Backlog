# ================================================================
# Shareable Linear Backlog — Environment Variables
# ================================================================
# Copy this file to .env in each project directory (frontend/, backend/)
# or use the per-project .env.example files as a reference.
#
# IMPORTANT: Never commit actual .env files — they contain secrets.
# ================================================================

# ===== FRONTEND (frontend/.env) =====
# Use same origin in dev so Vite can proxy /api to the backend (avoids CORS).
# Dev: http://localhost:1576/api (Vite proxies to backend; configure with VITE_PROXY_TARGET if needed)
VITE_API_URL=http://localhost:1576/api

# ===== BACKEND (backend/.env) =====
PORT=3000
NODE_ENV=development
LOG_LEVEL=info
ALLOWED_ORIGINS=http://localhost:1576
LINEAR_API_KEY=lin_api_YOUR_KEY_HERE

# Sync Configuration
# Set to false to disable scheduled sync entirely (default: true)
SYNC_ENABLED=true
# Cron expression for sync schedule (default: twice daily at 6 AM and 12 PM)
SYNC_CRON_SCHEDULE=0 6,12 * * *
# Optional: protect manual sync trigger endpoint (when set, `POST /api/sync/trigger`
# requires `Authorization: Bearer <token>` or `X-Sync-Trigger-Token: <token>`).
# SYNC_TRIGGER_TOKEN=your-admin-trigger-token-here

# Network Access Control (Epic 7)
# Comma-separated CIDR ranges for allowed networks (e.g., 10.0.0.0/8,172.16.0.0/12,192.168.0.0/16)
# When NETWORK_CHECK_ENABLED=true, only IPs within these ranges can access the API (except /api/health).
ALLOWED_NETWORKS=10.0.0.0/8,172.16.0.0/12,192.168.0.0/16
# Set to false to disable network verification (development). Default: true in production.
NETWORK_CHECK_ENABLED=false

# Session Configuration (Epic 7 — User Approval Workflow)
# Secret key for signing session cookies. MUST be changed in production.
# Supports encrypted values with enc: prefix (see CREDENTIAL_ENCRYPTION_KEY).
SESSION_SECRET=change-me-in-production

# Database — PostgreSQL connection string
# For Azure PostgreSQL, append: ?sslmode=require&uselibpqcompat=true
DATABASE_URL=postgresql://user:password@localhost:5432/shareable_linear_backlog

# Security — Credential Encryption (Epic 10 — Story 10.1)
# Optional: passphrase used to encrypt/decrypt env var values prefixed with "enc:".
# When set, LINEAR_API_KEY and SESSION_SECRET can be stored encrypted.
# Not required for development (plaintext values pass through unchanged).
# CREDENTIAL_ENCRYPTION_KEY=your-strong-passphrase-here

# Security — Database Column Encryption (Epic 10 — Story 10.1)
# Key used by pgcrypto pgp_sym_encrypt/decrypt for column-level encryption.
# DB_ENCRYPTION_KEY=your-db-encryption-key-here

# Security — Database SSL (Epic 10 — Story 10.1)
# Set to true to enable SSL for PostgreSQL connections. Auto-enabled in production.
# DB_SSL_ENABLED=false
