# ================================================================
# Shareable Linear Backlog — Production Environment Variables
# ================================================================
# Copy this file to .env.production and fill in all values.
#
# SECURITY: Never commit .env.production — it contains secrets.
# SECURITY: Use strong, unique values for all secrets.
# SECURITY: Consider using enc: prefix for encrypted credentials
#           (see docs/credential-management.md).
# ================================================================

# ===== Server =====
NODE_ENV=production
PORT=3000
LOG_LEVEL=info

# ===== Database =====
# PostgreSQL connection string (HOST CONTEXT)
# Used by host scripts like ./scripts/migrate.sh and ./scripts/seed.sh.
# In Docker Compose production, the backend container overrides DATABASE_URL to use
# the Docker-internal hostname `db` (see docker-compose.prod.yml).
DATABASE_URL=postgresql://slb_user:CHANGE_ME_STRONG_PASSWORD@localhost:5432/shareable_linear_backlog

# Docker Compose database credentials (must match DATABASE_URL)
DB_USER=slb_user
DB_PASSWORD=CHANGE_ME_STRONG_PASSWORD
DB_NAME=shareable_linear_backlog
DB_PORT=5432

# Enable SSL for PostgreSQL connections (required for cloud databases)
# DB_SSL_ENABLED=true

# ===== Linear API =====
# API key for syncing backlog data from Linear
LINEAR_API_KEY=lin_api_YOUR_PRODUCTION_KEY
# Linear project UUID for backlog sync
# LINEAR_PROJECT_ID=your-linear-project-uuid

# ===== Security =====
# Session cookie signing secret — MUST be 32+ characters, unique per environment
SESSION_SECRET=CHANGE_ME_GENERATE_WITH_openssl_rand_base64_48

# CORS — comma-separated list of allowed origins (Vixxo internal domain)
ALLOWED_ORIGINS=https://backlog.vixxo.internal

# Network access control — comma-separated CIDR ranges
ALLOWED_NETWORKS=10.0.0.0/8,172.16.0.0/12
NETWORK_CHECK_ENABLED=true

# Optional: passphrase for encrypting sensitive env var values (enc: prefix)
# CREDENTIAL_ENCRYPTION_KEY=your-strong-passphrase-here

# Optional: database column encryption key (pgcrypto)
# DB_ENCRYPTION_KEY=your-db-encryption-key-here

# ===== Sync Configuration =====
SYNC_ENABLED=true
# Sync schedule — 8am and 4pm weekdays (Vixxo business hours)
SYNC_CRON_SCHEDULE=0 8,16 * * 1-5

# Optional: protect manual sync trigger endpoint
# SYNC_TRIGGER_TOKEN=your-admin-trigger-token-here

# ===== Static File Serving =====
# Set to 'true' to have Express serve frontend static files (non-Docker deployments)
# In Docker deployment, nginx handles static files — leave unset or 'false'
# SERVE_STATIC=false

# Override path to frontend dist directory (for non-Docker deployments)
# FRONTEND_DIST_PATH=/path/to/frontend/dist

# ===== Health Check & Monitoring (Epic 12 — Story 12.2) =====
# Interval between automated health checks (ms). Default: 60000 (1 minute)
HEALTH_CHECK_INTERVAL_MS=60000
# Timeout for Linear API health check (ms). Default: 5000 (5 seconds)
HEALTH_CHECK_LINEAR_TIMEOUT_MS=5000
# Webhook URL for health status alerts (optional — Slack, Teams, or generic HTTP)
# ALERT_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL
# Cooldown between alerts (ms). Default: 300000 (5 minutes)
ALERT_COOLDOWN_MS=300000
# Application version reported in health check response
# APP_VERSION=1.0.0

# ===== Docker Compose Frontend Port =====
# Port to expose the frontend nginx container on (default: 80)
FRONTEND_PORT=80
