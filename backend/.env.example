# Server Configuration
# Port for the Express API server
PORT=3000
# Environment: development | production
NODE_ENV=development
# Log level: trace | debug | info | warn | error | fatal (Pino)
LOG_LEVEL=info

# CORS — comma-separated list of allowed origins
ALLOWED_ORIGINS=http://localhost:1576

# Database
# Supports encrypted values with enc: prefix (see CREDENTIAL_ENCRYPTION_KEY).
# See docs/credential-management.md for rotation procedures.
DATABASE_URL=postgresql://user:password@localhost:5432/shareable_linear_backlog

# Linear API
LINEAR_API_KEY=lin_api_YOUR_KEY_HERE
LINEAR_PROJECT_ID=your-linear-project-uuid-here

# New Item Flagging — items created within this many days are flagged as "new"
NEW_ITEM_DAYS_THRESHOLD=7

# Sync Configuration
# Set to false to disable scheduled sync entirely (default: true)
SYNC_ENABLED=true
# Cron expression for sync schedule.
# The schedule is now stored in the database (app_settings table, key: sync_cron_schedule).
# This env var is only used as a fallback when the DB setting is missing.
# Default (seeded by migration 007): every 15 minutes (*/15 * * * *)
# SYNC_CRON_SCHEDULE=*/15 * * * *
# Optional: protect manual sync trigger endpoint (when set, `POST /api/sync/trigger`
# requires `Authorization: Bearer <token>` or `X-Sync-Trigger-Token: <token>`).
# Supports encrypted values with enc: prefix (see CREDENTIAL_ENCRYPTION_KEY).
# See docs/credential-management.md for rotation procedures.
# SYNC_TRIGGER_TOKEN=your-admin-trigger-token-here
#
# Note: when SYNC_TRIGGER_TOKEN is set, `GET /api/sync/status` will also suppress
# technical sync error details (`errorMessage`) unless the same token is provided.

# Session Configuration (Epic 7 — User Approval Workflow)
# Secret key for signing session cookies. MUST be changed in production.
# Supports encrypted values with enc: prefix (see CREDENTIAL_ENCRYPTION_KEY).
SESSION_SECRET=change-me-in-production

# Security — Credential Encryption (Epic 10 — Story 10.1, 10.4)
# Optional: passphrase used to encrypt/decrypt env var values prefixed with "enc:".
# When set, LINEAR_API_KEY, SESSION_SECRET, DATABASE_URL, and SYNC_TRIGGER_TOKEN
# can be stored encrypted. Required if any env var uses the enc: prefix.
# Not required for development (plaintext values pass through unchanged).
# See docs/credential-management.md for full encryption guide and rotation procedures.
# CREDENTIAL_ENCRYPTION_KEY=your-strong-passphrase-here

# Security — Database Column Encryption (Epic 10 — Story 10.1)
# Key used by pgcrypto pgp_sym_encrypt/decrypt for column-level encryption.
# Required when using the encrypt/decrypt utilities from utils/encryption.ts.
# DB_ENCRYPTION_KEY=your-db-encryption-key-here

# Security — Database SSL (Epic 10 — Story 10.1)
# Set to true to enable SSL for PostgreSQL connections.
# Automatically enabled in production (NODE_ENV=production).
# DB_SSL_ENABLED=false

# Health Check & Monitoring (Epic 12 — Story 12.2)
# Interval between automated health checks (ms). Default: 60000 (1 minute)
# HEALTH_CHECK_INTERVAL_MS=60000
# Timeout for Linear API health check (ms). Default: 5000 (5 seconds)
# HEALTH_CHECK_LINEAR_TIMEOUT_MS=5000
# Webhook URL for health status alerts (optional, leave unset to disable alerts)
# ALERT_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL
# Cooldown between alerts (ms). Default: 300000 (5 minutes)
# ALERT_COOLDOWN_MS=300000
# Application version reported in health check response
# APP_VERSION=0.0.0
